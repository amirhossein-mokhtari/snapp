(this["webpackJsonpsnapp.ir"]=this["webpackJsonpsnapp.ir"]||[]).push([[5],{1187:function(t,e,n){"use strict";function a(t,e){return null!=t?t:e()}n.d(e,"a",(function(){return a}))},1188:function(t,e,n){"use strict";n.r(e),n.d(e,"addExtensionMethods",(function(){return i.a})),n.d(e,"startIdleTransaction",(function(){return i.b})),n.d(e,"Integrations",(function(){return a})),n.d(e,"Span",(function(){return pt.a})),n.d(e,"spanStatusfromHttpCode",(function(){return pt.c})),n.d(e,"SpanStatus",(function(){return ut})),n.d(e,"Transaction",(function(){return lt.a})),n.d(e,"IdleTransaction",(function(){return B.c})),n.d(e,"getActiveTransaction",(function(){return G.a})),n.d(e,"hasTracingEnabled",(function(){return G.b})),n.d(e,"BROWSER_TRACING_INTEGRATION_ID",(function(){return ct})),n.d(e,"BrowserTracing",(function(){return dt})),n.d(e,"defaultRequestInstrumentationOptions",(function(){return it})),n.d(e,"instrumentOutgoingRequests",(function(){return rt})),n.d(e,"TRACEPARENT_REGEXP",(function(){return N.a})),n.d(e,"extractTraceparentData",(function(){return N.b})),n.d(e,"stripUrlQueryAndFragment",(function(){return c.c}));var a={};n.r(a),n.d(a,"Express",(function(){return u})),n.d(a,"Postgres",(function(){return b})),n.d(a,"Mysql",(function(){return T})),n.d(a,"Mongo",(function(){return O})),n.d(a,"Prisma",(function(){return S})),n.d(a,"GraphQL",(function(){return y})),n.d(a,"Apollo",(function(){return j})),n.d(a,"BrowserTracing",(function(){return dt}));var i=n(195),r=n(156),s=n(15),c=n(182),o=n(3),d=n(11);n(175);function _(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=t.method&&t.method.toUpperCase();let a="",i="url";e.customRoute||t.route?(a=e.customRoute||"".concat(t.baseUrl||"").concat(t.route&&t.route.path),i="route"):(t.originalUrl||t.url)&&(a=Object(c.c)(t.originalUrl||t.url||""));let r="";return e.method&&n&&(r+=n),e.method&&e.path&&(r+=" "),e.path&&a&&(r+=a),[r,i]}class u{static __initStatic(){this.id="Express"}__init(){this.name=u.id}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.prototype.__init.call(this),this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}setupOnce(){this._router?(function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((e=>h(t,e)))}(this._router,this._methods),function(t){var e="settings"in t;e&&void 0===t._router&&t.lazyrouter&&t.lazyrouter();var n=e?t._router:t;if(!n)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.debug("Routing instrumentation is currently only supported in Express 4."));var a=Object.getPrototypeOf(n),i=a.process_params;a.process_params=function(t,e,n,a,s){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:o,isRegex:u,isArray:p,numExtraSegments:l}=function(t){var e=Object(r.a)([t,"access",t=>t.route,"optionalAccess",t=>t.path]),n=Object(d.k)(e),a=Array.isArray(e);if(!e)return{isRegex:n,isArray:a,numExtraSegments:0};var i=a?Math.max((s=e,s.reduce(((t,e)=>t+Object(c.a)(e.toString())),0)-Object(c.a)(t.path||"")),0):0;var s;return{layerRoutePath:f(a,e),isRegex:n,isArray:a,numExtraSegments:i}}(t);var h=(o||t.path||"").split("/").filter((t=>t.length>0&&(u||p||!t.includes("*")))).join("/");if(h&&h.length>0&&(n._reconstructedRoute+="/".concat(h).concat(u?"/":"")),Object(c.a)(n.originalUrl||"")+l===Object(c.a)(n._reconstructedRoute)){var m=a.__sentry_transaction;if(m&&"custom"!==m.metadata.source){var g=n._reconstructedRoute||"/";m.setName(..._(n,{path:!0,method:!0,customRoute:g}))}}return i.call(this,t,e,n,a,s)}}(this._router)):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.error("ExpressIntegration is missing an Express instance")}}function p(t,e){var n=t.length;switch(n){case 2:return function(n,a){var i=a.__sentry_transaction;if(i){var r=i.startChild({description:t.name,op:"express.middleware.".concat(e)});a.once("finish",(()=>{r.finish()}))}return t.call(this,n,a)};case 3:return function(n,a,i){var s=a.__sentry_transaction,c=Object(r.a)([s,"optionalAccess",t=>t.startChild,"call",n=>n({description:t.name,op:"express.middleware.".concat(e)})]);t.call(this,n,a,(function(){Object(r.a)([c,"optionalAccess",t=>t.finish,"call",t=>t()]);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.call(this,...e)}))};case 4:return function(n,a,i,s){var c=i.__sentry_transaction,o=Object(r.a)([c,"optionalAccess",t=>t.startChild,"call",n=>n({description:t.name,op:"express.middleware.".concat(e)})]);t.call(this,n,a,i,(function(){Object(r.a)([o,"optionalAccess",t=>t.finish,"call",t=>t()]);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];s.call(this,...e)}))};default:throw new Error("Express middleware takes 2-4 arguments. Got: ".concat(n))}}function l(t,e){return t.map((t=>"function"===typeof t?p(t,e):Array.isArray(t)?t.map((t=>"function"===typeof t?p(t,e):t)):t))}function h(t,e){var n=t[e];return t[e]=function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n.call(this,...l(a,e))},t}function f(t,e){return t?e.map((t=>t.toString())).join(","):e&&e.toString()}u.__initStatic();var m=n(66),g=n(18);class b{static __initStatic(){this.id="Postgres"}__init(){this.name=b.id}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b.prototype.__init.call(this),this._usePgNative=!!t.usePgNative}setupOnce(t,e){var n=Object(m.c)("pg");if(!n)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.error("Postgres Integration was unable to require `pg` package."));if(this._usePgNative&&!Object(r.a)([n,"access",t=>t.native,"optionalAccess",t=>t.Client]))return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.error("Postgres Integration was unable to access 'pg-native' bindings."));const{Client:a}=this._usePgNative?n.native:n;Object(g.e)(a.prototype,"query",(function(t){return function(n,a,i){var s=e().getScope(),c=Object(r.a)([s,"optionalAccess",t=>t.getSpan,"call",t=>t()]),o=Object(r.a)([c,"optionalAccess",t=>t.startChild,"call",t=>t({description:"string"===typeof n?n:n.text,op:"db"})]);if("function"===typeof i)return t.call(this,n,a,(function(t,e){Object(r.a)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),i(t,e)}));if("function"===typeof a)return t.call(this,n,(function(t,e){Object(r.a)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),a(t,e)}));var _="undefined"!==typeof a?t.call(this,n,a):t.call(this,n);return Object(d.n)(_)?_.then((t=>(Object(r.a)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):(Object(r.a)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),_)}}))}}b.__initStatic();class T{constructor(){T.prototype.__init.call(this)}static __initStatic(){this.id="Mysql"}__init(){this.name=T.id}setupOnce(t,e){var n=Object(m.c)("mysql/lib/Connection.js");n?Object(g.e)(n,"createQuery",(function(t){return function(n,a,i){var s=e().getScope(),c=Object(r.a)([s,"optionalAccess",t=>t.getSpan,"call",t=>t()]),o=Object(r.a)([c,"optionalAccess",t=>t.startChild,"call",t=>t({description:"string"===typeof n?n:n.sql,op:"db"})]);return"function"===typeof i?t.call(this,n,a,(function(t,e,n){Object(r.a)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),i(t,e,n)})):"function"===typeof a?t.call(this,n,(function(t,e,n){Object(r.a)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),a(t,e,n)})):t.call(this,n,a,i)}})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.error("Mysql Integration was unable to require `mysql` package.")}}T.__initStatic();var v=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],E={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class O{static __initStatic(){this.id="Mongo"}__init(){this.name=O.id}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O.prototype.__init.call(this),this._operations=Array.isArray(t.operations)?t.operations:v,this._describeOperations=!("describeOperations"in t)||t.describeOperations,this._useMongoose=!!t.useMongoose}setupOnce(t,e){var n=this._useMongoose?"mongoose":"mongodb",a=Object(m.c)(n);a?this._instrumentOperations(a.Collection,this._operations,e):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.error("Mongo Integration was unable to require `".concat(n,"` package."))}_instrumentOperations(t,e,n){e.forEach((e=>this._patchOperation(t,e,n)))}_patchOperation(t,e,n){if(e in t.prototype){var a=this._getSpanContextFromOperationArguments.bind(this);Object(g.e)(t.prototype,e,(function(t){return function(){for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];var o=s[s.length-1],_=n().getScope(),u=Object(r.a)([_,"optionalAccess",t=>t.getSpan,"call",t=>t()]);if("function"!==typeof o||"mapReduce"===e&&2===s.length){var p=Object(r.a)([u,"optionalAccess",t=>t.startChild,"call",t=>t(a(this,e,s))]),l=t.call(this,...s);return Object(d.n)(l)?l.then((t=>(Object(r.a)([p,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):(Object(r.a)([p,"optionalAccess",t=>t.finish,"call",t=>t()]),l)}p=Object(r.a)([u,"optionalAccess",t=>t.startChild,"call",t=>t(a(this,e,s.slice(0,-1)))]);return t.call(this,...s.slice(0,-1),(function(t,e){Object(r.a)([p,"optionalAccess",t=>t.finish,"call",t=>t()]),o(t,e)}))}}))}}_getSpanContextFromOperationArguments(t,e,n){var a={collectionName:t.collectionName,dbName:t.dbName,namespace:t.namespace},i={op:"db",description:e,data:a},r=E[e],s=Array.isArray(this._describeOperations)?this._describeOperations.includes(e):this._describeOperations;if(!r||!s)return i;try{if("mapReduce"===e){const[t,e]=n;a[r[0]]="string"===typeof t?t:t.name||"<anonymous>",a[r[1]]="string"===typeof e?e:e.name||"<anonymous>"}else for(let t=0;t<r.length;t++)a[r[t]]=JSON.stringify(n[t])}catch(c){}return i}}O.__initStatic();class S{static __initStatic(){this.id="Prisma"}__init(){this.name=S.id}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;S.prototype.__init.call(this),(e=t.client)&&e.$use?this._client=t.client:("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client: ".concat(JSON.stringify(t.client)))}setupOnce(t,e){this._client?this._client.$use(((t,n)=>{var a=e().getScope(),i=Object(r.a)([a,"optionalAccess",t=>t.getSpan,"call",t=>t()]),s=t.action,c=t.model,o=Object(r.a)([i,"optionalAccess",t=>t.startChild,"call",t=>t({description:c?"".concat(c," ").concat(s):s,op:"db.prisma"})]),_=n(t);return Object(d.n)(_)?_.then((t=>(Object(r.a)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):(Object(r.a)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),_)})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.error("PrismaIntegration is missing a Prisma Client Instance")}}S.__initStatic();class y{constructor(){y.prototype.__init.call(this)}static __initStatic(){this.id="GraphQL"}__init(){this.name=y.id}setupOnce(t,e){var n=Object(m.c)("graphql/execution/execute.js");n?Object(g.e)(n,"execute",(function(t){return function(){var n=e().getScope(),a=Object(r.a)([n,"optionalAccess",t=>t.getSpan,"call",t=>t()]),i=Object(r.a)([a,"optionalAccess",t=>t.startChild,"call",t=>t({description:"execute",op:"db.graphql"})]);Object(r.a)([n,"optionalAccess",t=>t.setSpan,"call",t=>t(i)]);for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];var _=t.call(this,...c);return Object(d.n)(_)?_.then((t=>(Object(r.a)([i,"optionalAccess",t=>t.finish,"call",t=>t()]),Object(r.a)([n,"optionalAccess",t=>t.setSpan,"call",t=>t(a)]),t))):(Object(r.a)([i,"optionalAccess",t=>t.finish,"call",t=>t()]),Object(r.a)([n,"optionalAccess",t=>t.setSpan,"call",t=>t(a)]),_)}})):s.c.error("GraphQL Integration was unable to require graphql/execution package.")}}y.__initStatic();class j{constructor(){j.prototype.__init.call(this)}static __initStatic(){this.id="Apollo"}__init(){this.name=j.id}setupOnce(t,e){var n=Object(m.c)("apollo-server-core");n?Object(g.e)(n.ApolloServerBase.prototype,"constructSchema",(function(t){return function(){var n=Array.isArray(this.config.resolvers)?this.config.resolvers:[this.config.resolvers];return this.config.resolvers=n.map((t=>(Object.keys(t).forEach((n=>{Object.keys(t[n]).forEach((a=>{"function"===typeof t[n][a]&&function(t,e,n,a){Object(g.e)(t[e],n,(function(t){return function(){for(var i=a().getScope(),s=Object(r.a)([i,"optionalAccess",t=>t.getSpan,"call",t=>t()]),c=Object(r.a)([s,"optionalAccess",t=>t.startChild,"call",t=>t({description:"".concat(e,".").concat(n),op:"db.graphql.apollo"})]),o=arguments.length,_=new Array(o),u=0;u<o;u++)_[u]=arguments[u];var p=t.call(this,..._);return Object(d.n)(p)?p.then((t=>(Object(r.a)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):(Object(r.a)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),p)}}))}(t,n,a,e)}))})),t))),t.call(this)}})):s.c.error("Apollo Integration was unable to require apollo-server-core package.")}}j.__initStatic();var R=n(19),N=n(204),D=n(188),B=n(198),G=n(192),U=Object(R.a)();var Y=n(1187),A=n(67),x=n(96),I=(t,e,n)=>{let a;return i=>{e.value>=0&&(i||n)&&(e.delta=e.value-(a||0),(e.delta||void 0===a)&&(a=e.value,t(e)))}},C=(t,e)=>({name:t,value:Object(Y.a)(e,(()=>-1)),delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}),k=(t,e)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((t=>t.getEntries().map(e)));return n.observe({type:t,buffered:!0}),n}}catch(a){}},w=(t,e)=>{var n=a=>{"pagehide"!==a.type&&"hidden"!==Object(R.a)().document.visibilityState||(t(a),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)};let M=-1;var q=()=>(M<0&&(M="hidden"===Object(R.a)().document.visibilityState?0:1/0,w((t=>{let{timeStamp:e}=t;M=e}),!0)),{get firstHiddenTime(){return M}}),P={},H=n(6);function L(t){return"number"===typeof t&&isFinite(t)}function F(t,e){let{startTimestamp:n}=e,a=Object(H.a)(e,["startTimestamp"]);return n&&t.startTimestamp>n&&(t.startTimestamp=n),t.startChild(Object(o.a)({startTimestamp:n},a))}var z=Object(R.a)();function W(){return z&&z.addEventListener&&z.performance}let J,Q,X=0,$={};function V(){((t,e)=>{var n=C("CLS",0);let a,i=0,r=[];var s=t=>{if(t&&!t.hadRecentInput){var e=r[0],s=r[r.length-1];i&&0!==r.length&&t.startTime-s.startTime<1e3&&t.startTime-e.startTime<5e3?(i+=t.value,r.push(t)):(i=t.value,r=[t]),i>n.value&&(n.value=i,n.entries=r,a&&a())}},c=k("layout-shift",s);c&&(a=I(t,n,e),w((()=>{c.takeRecords().map(s),a(!0)})))})((t=>{var e=t.entries.pop();e&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Adding CLS"),$.cls={value:t.value,unit:""},Q=e)}))}function K(t){((t,e)=>{var n=q(),a=C("LCP");let i;var r=t=>{var e=t.startTime;e<n.firstHiddenTime&&(a.value=e,a.entries.push(t)),i&&i()},s=k("largest-contentful-paint",r);if(s){i=I(t,a,e);var c=()=>{P[a.id]||(s.takeRecords().map(r),s.disconnect(),P[a.id]=!0,i(!0))};["keydown","click"].forEach((t=>{addEventListener(t,c,{once:!0,capture:!0})})),w(c,!0)}})((t=>{var e=t.entries.pop();if(e){var n=Object(G.c)(A.a),a=Object(G.c)(e.startTime);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Adding LCP"),$.lcp={value:t.value,unit:"millisecond"},$["mark.lcp"]={value:n+a,unit:"second"},J=e}}),t)}function Z(){((t,e)=>{var n=q(),a=C("FID");let i;var r=t=>{i&&t.startTime<n.firstHiddenTime&&(a.value=t.processingStart-t.startTime,a.entries.push(t),i(!0))},s=k("first-input",r);s&&(i=I(t,a,e),w((()=>{s.takeRecords().map(r),s.disconnect()}),!0))})((t=>{var e=t.entries.pop();if(e){var n=Object(G.c)(A.a),a=Object(G.c)(e.startTime);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Adding FID"),$.fid={value:t.value,unit:"millisecond"},$["mark.fid"]={value:n+a,unit:"second"}}}))}function tt(t){var e=W();if(!e||!z.performance.getEntries||!A.a)return;("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Tracing] Adding & adjusting spans using Performance API");var n=Object(G.c)(A.a),a=e.getEntries();let i,r;a.slice(X).forEach((e=>{var a=Object(G.c)(e.startTime),c=Object(G.c)(e.duration);if(!("navigation"===t.op&&n+a<t.startTimestamp))switch(e.entryType){case"navigation":!function(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((a=>{et(t,e,a,n)})),et(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),et(t,e,"fetch",n,"cache","domainLookupStart"),et(t,e,"domainLookup",n,"DNS"),function(t,e,n){F(t,{op:"browser",description:"request",startTimestamp:n+Object(G.c)(e.requestStart),endTimestamp:n+Object(G.c)(e.responseEnd)}),F(t,{op:"browser",description:"response",startTimestamp:n+Object(G.c)(e.responseStart),endTimestamp:n+Object(G.c)(e.responseEnd)})}(t,e,n)}(t,e,n),i=n+Object(G.c)(e.responseStart),r=n+Object(G.c)(e.requestStart);break;case"mark":case"paint":case"measure":var o=function(t,e,n,a,i){var r=i+n,s=r+a;return F(t,{description:e.name,endTimestamp:s,op:e.entryType,startTimestamp:r}),r}(t,e,a,c,n),d=q(),_=e.startTime<d.firstHiddenTime;"first-paint"===e.name&&_&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Adding FP"),$.fp={value:e.startTime,unit:"millisecond"},$["mark.fp"]={value:o,unit:"second"}),"first-contentful-paint"===e.name&&_&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Adding FCP"),$.fcp={value:e.startTime,unit:"millisecond"},$["mark.fcp"]={value:o,unit:"second"});break;case"resource":var u=e.name.replace(z.location.origin,"");!function(t,e,n,a,i,r){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;var s={};"transferSize"in e&&(s["Transfer Size"]=e.transferSize);"encodedBodySize"in e&&(s["Encoded Body Size"]=e.encodedBodySize);"decodedBodySize"in e&&(s["Decoded Body Size"]=e.decodedBodySize);var c=r+a;F(t,{description:n,endTimestamp:c+i,op:e.initiatorType?"resource.".concat(e.initiatorType):"resource",startTimestamp:c,data:s})}(t,e,u,a,c,n)}})),X=Math.max(a.length-1,0),function(t){var e=z.navigator;if(!e)return;var n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),L(n.rtt)&&($["connection.rtt"]={value:n.rtt,unit:"millisecond"}),L(n.downlink)&&($["connection.downlink"]={value:n.downlink,unit:""}));L(e.deviceMemory)&&t.setTag("deviceMemory","".concat(e.deviceMemory," GB"));L(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}(t),"pageload"===t.op&&("number"===typeof i&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Adding TTFB"),$.ttfb={value:1e3*(i-t.startTimestamp),unit:"millisecond"},"number"===typeof r&&r<=i&&($["ttfb.requestTime"]={value:1e3*(i-r),unit:"millisecond"})),["fcp","fp","lcp"].forEach((e=>{if($[e]&&!(n>=t.startTimestamp)){var a=$[e].value,i=n+Object(G.c)(a),r=Math.abs(1e3*(i-t.startTimestamp)),c=r-a;("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Normalized ".concat(e," from ").concat(a," to ").concat(r," (").concat(c,")")),$[e].value=r}})),$["mark.fid"]&&$.fid&&F(t,{description:"first input delay",endTimestamp:$["mark.fid"].value+Object(G.c)($.fid.value),op:"web.vitals",startTimestamp:$["mark.fid"].value}),"fcp"in $||delete $.cls,Object.keys($).forEach((e=>{t.setMeasurement(e,$[e].value,$[e].unit)})),function(t){J&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Adding LCP Data"),J.element&&t.setTag("lcp.element",Object(x.b)(J.element)),J.id&&t.setTag("lcp.id",J.id),J.url&&t.setTag("lcp.url",J.url.trim().slice(0,200)),t.setTag("lcp.size",J.size));Q&&Q.sources&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Adding CLS Data"),Q.sources.forEach(((e,n)=>t.setTag("cls.source.".concat(n+1),Object(x.b)(e.node)))))}(t)),J=void 0,Q=void 0,$={}}function et(t,e,n,a,i,r){var s=r?e[r]:e["".concat(n,"End")],c=e["".concat(n,"Start")];c&&s&&F(t,{op:"browser",description:Object(Y.a)(i,(()=>n)),startTimestamp:a+Object(G.c)(c),endTimestamp:a+Object(G.c)(s)})}var nt=n(47),at=n(98),it={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};function rt(t){const{traceFetch:e,traceXHR:n,tracingOrigins:a,shouldCreateSpanForRequest:i}=Object(o.a)(Object(o.a)({},it),t);var r={},s=t=>{if(r[t])return r[t];var e=a;return r[t]=e.some((e=>Object(nt.a)(t,e)))&&!Object(nt.a)(t,"sentry_key"),r[t]};let c=s;"function"===typeof i&&(c=t=>s(t)&&i(t));var _={};e&&Object(at.a)("fetch",(t=>{!function(t,e,n){if(!Object(G.b)()||!t.fetchData||!e(t.fetchData.url))return;if(t.endTimestamp){var a=t.fetchData.__span;if(!a)return;return void((r=n[a])&&(t.response?r.setHttpStatus(t.response.status):t.error&&r.setStatus("internal_error"),r.finish(),delete n[a]))}var i=Object(G.a)();if(i){var r=i.startChild({data:Object(o.a)(Object(o.a)({},t.fetchData),{},{type:"fetch"}),description:"".concat(t.fetchData.method," ").concat(t.fetchData.url),op:"http.client"});t.fetchData.__span=r.spanId,n[r.spanId]=r;var s=t.args[0]=t.args[0],c=t.args[1]=t.args[1]||{};c.headers=function(t,e,n,a){let i=a.headers;Object(d.g)(t,Request)&&(i=t.headers);if(i)if("function"===typeof i.append)i.append("sentry-trace",n.toTraceparent()),i.append(D.a,Object(D.e)(e,i.get(D.a)));else if(Array.isArray(i)){const[,t]=i.find((t=>{let[e,n]=t;return e===D.a}));i=[...i,["sentry-trace",n.toTraceparent()],[D.a,Object(D.e)(e,t)]]}else i=Object(o.a)(Object(o.a)({},i),{},{"sentry-trace":n.toTraceparent(),baggage:Object(D.e)(e,i.baggage)});else i={"sentry-trace":n.toTraceparent(),baggage:Object(D.e)(e)};return i}(s,i.getBaggage(),r,c)}}(t,c,_)})),n&&Object(at.a)("xhr",(t=>{!function(t,e,n){if(!Object(G.b)()||t.xhr&&t.xhr.__sentry_own_request__||!(t.xhr&&t.xhr.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url)))return;var a=t.xhr.__sentry_xhr__;if(t.endTimestamp){var i=t.xhr.__sentry_xhr_span_id__;if(!i)return;return void((s=n[i])&&(s.setHttpStatus(a.status_code),s.finish(),delete n[i]))}var r=Object(G.a)();if(r){var s=r.startChild({data:Object(o.a)(Object(o.a)({},a.data),{},{type:"xhr",method:a.method,url:a.url}),description:"".concat(a.method," ").concat(a.url),op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=s.spanId,n[t.xhr.__sentry_xhr_span_id__]=s,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",s.toTraceparent());var c=t.xhr.getRequestHeader&&t.xhr.getRequestHeader(D.a);t.xhr.setRequestHeader(D.a,Object(D.e)(r.getBaggage(),c))}catch(d){}}}(t,c,_)}))}var st=Object(R.a)();var ct="BrowserTracing",ot=Object(o.a)({idleTimeout:B.b,finalTimeout:B.a,markBackgroundTransactions:!0,routingInstrumentation:function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!st||!st.location)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.warn("Could not initialize routing instrumentation due to invalid location"));let a,i=st.location.href;e&&(a=t({name:st.location.pathname,op:"pageload",metadata:{source:"url"}})),n&&Object(at.a)("history",(e=>{let{to:n,from:r}=e;void 0===r&&i&&-1!==i.indexOf(n)?i=void 0:r!==n&&(i=void 0,a&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Tracing] Finishing current transaction with op: ".concat(a.op)),a.finish()),a=t({name:st.location.pathname,op:"navigation",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,_experiments:{enableLongTask:!0}},it);class dt{__init(){this.name=ct}constructor(t){dt.prototype.__init.call(this);let e=it.tracingOrigins;t&&(t.tracingOrigins&&Array.isArray(t.tracingOrigins)?e=t.tracingOrigins:("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this._emitOptionsWarning=!0)),this.options=Object(o.a)(Object(o.a)(Object(o.a)({},ot),t),{},{tracingOrigins:e});const{_metricOptions:n}=this.options;!function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=W();e&&A.a&&(e.mark&&z.performance.mark("sentry-tracing-init"),V(),K(t),Z())}(n&&n._reportAllChanges),Object(r.a)([this,"access",t=>t.options,"access",t=>t._experiments,"optionalAccess",t=>t.enableLongTask])&&k("longtask",(t=>{var e=Object(G.a)();if(e){var n=Object(G.c)(A.a+t.startTime),a=Object(G.c)(t.duration);e.startChild({description:"Long Task",op:"ui.long-task",startTimestamp:n,endTimestamp:n+a})}}))}setupOnce(t,e){this._getCurrentHub=e,this._emitOptionsWarning&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.warn("[Tracing] We added a reasonable default for you: ".concat(it.tracingOrigins)));const{routingInstrumentation:n,startTransactionOnLocationChange:a,startTransactionOnPageLoad:i,markBackgroundTransactions:r,traceFetch:c,traceXHR:o,tracingOrigins:d,shouldCreateSpanForRequest:_}=this.options;n((t=>this._createRouteTransaction(t)),i,a),r&&(U&&U.document?U.document.addEventListener("visibilitychange",(()=>{var t=Object(G.a)();if(U.document.hidden&&t){var e="cancelled";("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Tracing] Transaction: ".concat(e," -> since tab moved to the background, op: ").concat(t.op)),t.status||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.finish()}})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.warn("[Tracing] Could not set up background tab detection due to lack of global document")),rt({traceFetch:c,traceXHR:o,tracingOrigins:d,shouldCreateSpanForRequest:_})}_createRouteTransaction(t){if(!this._getCurrentHub)return void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.warn("[Tracing] Did not create ".concat(t.op," transaction because _getCurrentHub is invalid.")));const{beforeNavigate:e,idleTimeout:n,finalTimeout:a}=this.options;var r="pageload"===t.op?function(){var t=_t("sentry-trace"),e=_t("baggage"),n=t?Object(N.b)(t):void 0,a=Object(D.f)(e,t);if(n||a)return Object(o.a)(Object(o.a)({},n&&n),a&&{metadata:{baggage:a}});return}():void 0,c=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},t),r),r&&{metadata:Object(o.a)(Object(o.a)({},t.metadata),r.metadata)}),{},{trimEnd:!0}),d="function"===typeof e?e(c):c,_=void 0===d?Object(o.a)(Object(o.a)({},c),{},{sampled:!1}):d;_.metadata=_.name!==c.name?Object(o.a)(Object(o.a)({},_.metadata),{},{source:"custom"}):_.metadata,!1===_.sampled&&("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Tracing] Will not send ".concat(_.op," transaction because of beforeNavigate.")),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Tracing] Starting ".concat(_.op," transaction on scope"));var u=this._getCurrentHub();const{location:p}=Object(R.a)();var l=Object(i.b)(u,_,n,a,!0,{location:p});return l.registerBeforeFinishCallback((t=>{tt(t),t.setTag("sentry_reportAllChanges",Boolean(this.options._metricOptions&&this.options._metricOptions._reportAllChanges))})),l}}function _t(t){var e=Object(R.a)();if(e.document&&e.document.querySelector){var n=e.document.querySelector("meta[name=".concat(t,"]"));return n?n.getAttribute("content"):null}return null}var ut,pt=n(196);!function(t){t.Ok="ok";t.DeadlineExceeded="deadline_exceeded";t.Unauthenticated="unauthenticated";t.PermissionDenied="permission_denied";t.NotFound="not_found";t.ResourceExhausted="resource_exhausted";t.InvalidArgument="invalid_argument";t.Unimplemented="unimplemented";t.Unavailable="unavailable";t.InternalError="internal_error";t.UnknownError="unknown_error";t.Cancelled="cancelled";t.AlreadyExists="already_exists";t.FailedPrecondition="failed_precondition";t.Aborted="aborted";t.OutOfRange="out_of_range";t.DataLoss="data_loss"}(ut||(ut={}));var lt=n(197);("undefined"===typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&Object(i.a)()},192:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s}));var a=n(23);function i(t){var e=Object(a.b)().getClient(),n=t||e&&e.getOptions();return!!n&&("tracesSampleRate"in n||"tracesSampler"in n)}function r(t){var e=(t||Object(a.b)()).getScope();return e&&e.getTransaction()}function s(t){return t/1e3}},195:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return f}));var a=n(3),i=n(23),r=n(15),s=n(11),c=n(66),o=n(688),d=n(198),_=n(197),u=n(192);function p(){var t=this.getScope();if(t){var e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function l(t,e,n){if(!Object(u.b)(e))return t.sampled=!1,t;if(void 0!==t.sampled)return t.setMetadata({transactionSampling:{method:"explicitly_set"}}),t;let a;return"function"===typeof e.tracesSampler?(a=e.tracesSampler(n),t.setMetadata({transactionSampling:{method:"client_sampler",rate:Number(a)}})):void 0!==n.parentSampled?(a=n.parentSampled,t.setMetadata({transactionSampling:{method:"inheritance"}})):(a=e.tracesSampleRate,t.setMetadata({transactionSampling:{method:"client_rate",rate:Number(a)}})),function(t){if(Object(s.h)(t)||"number"!==typeof t&&"boolean"!==typeof t)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ".concat(JSON.stringify(t)," of type ").concat(JSON.stringify(typeof t),".")),!1;if(t<0||t>1)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ".concat(t,".")),!1;return!0}(a)?a?(t.sampled=Math.random()<a,t.sampled?(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] starting ".concat(t.op," transaction - ").concat(t.name)),t):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ".concat(Number(a),")")),t)):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.log("[Tracing] Discarding transaction because ".concat("function"===typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.c.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function h(t,e){var n=this.getClient(),i=n&&n.getOptions()||{};let r=new _.a(t,this);return r=l(r,i,Object(a.a)({parentSampled:t.parentSampled,transactionContext:t},e)),r.sampled&&r.initSpanRecorder(i._experiments&&i._experiments.maxSpans),r}function f(t,e,n,i,r,s){var c=t.getClient(),o=c&&c.getOptions()||{};let _=new d.c(e,t,n,i,r);return _=l(_,o,Object(a.a)({parentSampled:e.parentSampled,transactionContext:e},s)),_.sampled&&_.initSpanRecorder(o._experiments&&o._experiments.maxSpans),_}function m(){!function(){var t=Object(i.d)();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=h),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=p))}(),Object(c.b)()&&function(){var e=Object(i.d)();if(e.__SENTRY__){var n={mongodb:()=>new(Object(c.a)(t,"./integrations/node/mongo").Mongo),mongoose:()=>new(Object(c.a)(t,"./integrations/node/mongo").Mongo)({mongoose:!0}),mysql:()=>new(Object(c.a)(t,"./integrations/node/mysql").Mysql),pg:()=>new(Object(c.a)(t,"./integrations/node/postgres").Postgres)},a=Object.keys(n).filter((t=>!!Object(c.c)(t))).map((t=>{try{return n[t]()}catch(e){return}})).filter((t=>t));a.length>0&&(e.__SENTRY__.integrations=[...e.__SENTRY__.integrations||[],...a])}}(),Object(o.a)()}}).call(this,n(88)(t))},196:function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return u}));var a=n(3),i=n(1187),r=n(31),s=n(67),c=n(15),o=n(18);class d{__init(){this.spans=[]}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;d.prototype.__init.call(this),this._maxlen=t}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class _{__init2(){this.traceId=Object(r.e)()}__init3(){this.spanId=Object(r.e)().substring(16)}__init4(){this.startTimestamp=Object(s.d)()}__init5(){this.tags={}}__init6(){this.data={}}constructor(t){if(_.prototype.__init2.call(this),_.prototype.__init3.call(this),_.prototype.__init4.call(this),_.prototype.__init5.call(this),_.prototype.__init6.call(this),!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}startChild(t){var e=new _(Object(a.a)(Object(a.a)({},t),{},{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));if(e.spanRecorder=this.spanRecorder,e.spanRecorder&&e.spanRecorder.add(e),e.transaction=this.transaction,("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&e.transaction){var n=t&&t.op||"< unknown op >",i=e.transaction.name||"< unknown name >",r=e.transaction.spanId,s="[Tracing] Starting '".concat(n,"' span on transaction '").concat(i,"' (").concat(r,").");e.transaction.metadata.spanMetadata[e.spanId]={logMessage:s},c.c.log(s)}return e}setTag(t,e){return this.tags=Object(a.a)(Object(a.a)({},this.tags),{},{[t]:e}),this}setData(t,e){return this.data=Object(a.a)(Object(a.a)({},this.data),{},{[t]:e}),this}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t));var e=u(t);return"unknown_error"!==e&&this.setStatus(e),this}isSuccess(){return"ok"===this.status}finish(t){if(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:t}=this.transaction.metadata.spanMetadata[this.spanId];t&&c.c.log(t.replace("Starting","Finishing"))}this.endTimestamp="number"===typeof t?t:Object(s.d)()}toTraceparent(){let t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),"".concat(this.traceId,"-").concat(this.spanId).concat(t)}toContext(){return Object(o.c)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=Object(i.a)(t.data,(()=>({}))),this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=Object(i.a)(t.spanId,(()=>this.spanId)),this.startTimestamp=Object(i.a)(t.startTimestamp,(()=>this.startTimestamp)),this.status=t.status,this.tags=Object(i.a)(t.tags,(()=>({}))),this.traceId=Object(i.a)(t.traceId,(()=>this.traceId)),this}getTraceContext(){return Object(o.c)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return Object(o.c)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}function u(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}},197:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var a=n(3),i=n(1187),r=n(23),s=n(15),c=n(18),o=n(188),d=n(196);class _ extends d.a{__init(){this._measurements={}}constructor(t,e){super(t),_.prototype.__init.call(this),this._hub=e||Object(r.b)(),this._name=t.name||"",this.metadata=Object(a.a)(Object(a.a)({},t.metadata),{},{spanMetadata:{}}),this._trimEnd=t.trimEnd,this.transaction=this}get name(){return this._name}set name(t){this._name=t,this.metadata.source="custom"}setName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom";this.name=t,this.metadata.source=e}initSpanRecorder(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.spanRecorder||(this.spanRecorder=new d.b(t)),this.spanRecorder.add(this)}setMeasurement(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this._measurements[t]={value:e,unit:n}}setMetadata(t){this.metadata=Object(a.a)(Object(a.a)({},this.metadata),t)}finish(t){if(void 0===this.endTimestamp){if(this.name||(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(t),!0===this.sampled){var e=this.spanRecorder?this.spanRecorder.spans.filter((t=>t!==this&&t.endTimestamp)):[];this._trimEnd&&e.length>0&&(this.endTimestamp=e.reduce(((t,e)=>t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t)).endTimestamp);var n=this.metadata,i=Object(a.a)({contexts:{trace:this.getTraceContext()},spans:e,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:Object(a.a)(Object(a.a)({},n),{},{baggage:this.getBaggage()})},n.source&&{transaction_info:{source:n.source}});return Object.keys(this._measurements).length>0&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),i.measurements=this._measurements),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Tracing] Finishing ".concat(this.op," transaction: ").concat(this.name,".")),this._hub.captureEvent(i)}("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.c.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");var r=this._hub.getClient();r&&r.recordDroppedEvent("sample_rate","transaction")}}toContext(){var t=super.toContext();return Object(c.c)(Object(a.a)(Object(a.a)({},t),{},{name:this.name,trimEnd:this._trimEnd}))}updateWithContext(t){return super.updateWithContext(t),this.name=Object(i.a)(t.name,(()=>"")),this._trimEnd=t.trimEnd,this}getBaggage(){var t=this.metadata.baggage,e=!t||Object(o.d)(t)?this._populateBaggageWithSentryValues(t):t;return this.metadata.baggage=e,e}_populateBaggageWithSentryValues(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(o.b)({});var e=this._hub||Object(r.b)(),n=e&&e.getClient();if(!n)return t;const{environment:i,release:s}=n.getOptions()||{},{publicKey:d}=n.getDsn()||{};var _=this.metadata&&this.metadata.transactionSampling&&this.metadata.transactionSampling.rate&&this.metadata.transactionSampling.rate.toString(),u=e.getScope();const{segment:p}=u&&u.getUser()||{};var l=this.metadata.source,h=l&&"url"!==l?this.name:void 0;return Object(o.b)(Object(c.c)(Object(a.a)({environment:i,release:s,transaction:h,user_segment:p,public_key:d,trace_id:this.traceId,sample_rate:_},Object(o.c)(t))),"",!1)}}},198:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return _}));var a=n(67),i=n(15),r=n(196),s=n(197),c=1e3,o=3e4;class d extends r.b{constructor(t,e,n,a){super(a),this._pushActivity=t,this._popActivity=e,this.transactionSpanId=n}add(t){t.spanId!==this.transactionSpanId&&(t.finish=e=>{t.endTimestamp="number"===typeof e?e:Object(a.d)(),this._popActivity(t.spanId)},void 0===t.endTimestamp&&this._pushActivity(t.spanId)),super.add(t)}}class _ extends s.a{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._beforeFinishCallbacks=[]}constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(t,e),this._idleHub=e,this._idleTimeout=n,this._finalTimeout=a,this._onScope=r,_.prototype.__init.call(this),_.prototype.__init2.call(this),_.prototype.__init3.call(this),_.prototype.__init4.call(this),r&&(u(e),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("Setting idle transaction on scope. Span ID: ".concat(this.spanId)),e.configureScope((t=>t.setSpan(this)))),this._startIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this.finish())}),this._finalTimeout)}finish(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(a.d)();if(this._finished=!0,this.activities={},this.spanRecorder){for(var e of(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op),this._beforeFinishCallbacks))e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanId===this.spanId)return!0;e.endTimestamp||(e.endTimestamp=t,e.setStatus("cancelled"),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));var n=e.startTimestamp<t;return n||("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(e,void 0,2)),n})),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] flushing IdleTransaction")}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] No active IdleTransaction");return this._onScope&&u(this._idleHub),super.finish(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){this.spanRecorder=new d((t=>{this._finished||this._pushActivity(t)}),(t=>{this._finished||this._popActivity(t)}),this.spanId,t),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}_cancelIdleTimeout(){this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0)}_startIdleTimeout(t){this._cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||this.finish(t)}),this._idleTimeout)}_pushActivity(t){this._cancelIdleTimeout(),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] pushActivity: ".concat(t)),this.activities[t]=!0,("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] popActivity ".concat(t)),delete this.activities[t],("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var e=Object(a.d)()+this._idleTimeout/1e3;this._startIdleTimeout(e)}}_beat(){if(!this._finished){var t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.finish()):this._pingHeartbeat()}}_pingHeartbeat(){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("pinging Heartbeat -> current counter: ".concat(this._heartbeatCounter)),setTimeout((()=>{this._beat()}),5e3)}}function u(t){var e=t.getScope();e&&(e.getTransaction()&&e.setSpan(void 0))}},204:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var a=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function i(t){var e=t.match(a);if(e){let t;return"1"===e[3]?t=!0:"0"===e[3]&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}}},688:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(98),i=n(15),r=n(192);function s(){Object(a.a)("error",c),Object(a.a)("unhandledrejection",c)}function c(){var t=Object(r.a)();if(t){var e="internal_error";("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] Transaction: ".concat(e," -> Global error occured")),t.setStatus(e)}}}}]);